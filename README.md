# FOREIGN COINS
The idea of the project is to have simple bot that will store the values of a given currency (let's start with EUR) and store it in a file.

# SETUP

## CREATE AND ACTIVATE VENV
python3 -m venv venv


source venv/bin/activate

## INSTALL DEPENDECIES AT PYPROJECT.TOML
poetry install

# RUN SCRIPT
## RUN CONVERSION API CODE
poetry run api --option <1, 2 or 3>

### HELP
poetry run api --help


poetry run api -h

## WEBSCRAPING CODE
poetry run scraping 

### [TODO] Add another conversion options like <RUN CONVERSION API CODE>

# CRON SCHEDULING
## LOCALLY
### RUN THE COMMAND EVERY 1'
Add a new task for your cron service. For that:


1. Run the command: crontab -e 


2. Add the following line:


"* * * * * cd /path/to/your/project/foreign_coins && . venv/bin/activate && poetry run api --option 1"


## ON REMOTE SERVER

Add a new task for your cron service. For that:


1. Access via ssh the remote server (check  "REMOTE SERVER" item)


2. Run the command: crontab -e 


3. Add the following line to run the command at 8am, 2pm and 8pm everyday:

0 8,14,20 * * * cd /path/to/your/project/foreign_coins && . venv/bin/activate && poetry run api\
 --option 1


## CHECK CRON SERVICE
To check if the cron service is running as expected, run the following command:


systemctl status cron

# EXPECTED OUTPUT
After setting up your project and cron-scheduling you will find 2 files inside the project folder:


- quotation_<api/scraping>.txt, 


- quotation_logs_<api/scraping>.txt


The name will depend on which type of method you choose to get the information: via api or web scraping.

## QUOTATION_<API/SCRAPING>.TXT
In this file, you will find information about the date, time, type of conversion, and the requested exchange rate. The information will be provided in the following format:


13/03/2025  16:42:14 - Preço atual (EURBRL): 6.2901 Brazilians Reais


13/03/2025  16:43:16 - Preço atual (EURBRL): 6.28931 Brazilians Reais


13/03/2025  16:44:16 - Preço atual (EURBRL): 6.28891 Brazilians Reais


## QUOTATION_LOGS_<API/SCRAPING>.TXT
This file contains log information generated by the request. An example of the file format is presented below.


INFO:src.foreign_coins.conversion_api:Started


INFO:src.foreign_coins.conversion_api:Quotation for EURBRL successfully saved: 13/03/2025  16:42:14 - Preço atual (EURBRL): 6.28931 Brazilians Reais


INFO:src.foreign_coins.conversion_api:Started


INFO:src.foreign_coins.conversion_api:Quotation for EURBRL successfully saved: 13/03/2025   16:43:16 - Preço atual (EURBRL): 6.28891 Brazilians Reais


INFO:src.foreign_coins.conversion_api:Started


INFO:src.foreign_coins.conversion_api:Quotation for EURBRL successfully saved: 13/03/2025  16:44:16 - Preço atual (EURBRL): 6.28891 Brazilians Reais


# REMOTE SERVER
## ADD REMOTE SERVER AT /ETC/HOSTS
<server_ip_address> <server-name>

## ADD PUBLIC SSH-KEY AT AUTHORIZED_KEYS FILE
Add my public ssh-key at /home/<user>>/.ssh/authorized_keys

## ACCESS REMOTE SERVER
ssh <user>@<server-name>


# LITERATURE
## AWESOMEAPI
On this code we use "AwesomeAPI", there is an important consideration about its use:


https://docs.awesomeapi.com.br/aviso-sobre-limites


"
Devido ao rápido e grande aumento no número de requisições nos últimos meses, que agora estão chegando a 100 milhões por dia, a AwesomeAPI implementará uma nova política para o plano gratuito a partir de 31 de março de 2025. As requisições mensais serão limitadas a 100 mil, com a contagem sendo reiniciada no primeiro dia de cada mês.

Essa ação de limitação é necessária para que possamos continuar oferecendo um serviço de alta qualidade e estabilidade para todos os nossos usuários. Para aqueles cujas necessidades excedem esse limite, recomendamos explorar nossos planos pagos.

Se tiver dúvidas ou precisar de assistência, entre em contato com nossa equipe de suporte.

Agradecemos por escolher a AwesomeAPI.

## POETRY
poetry 2.1.1

### To add a new library use:
poetry add <library>

### To run the project:
poetry run python3 <script.py>

### To update dependecies:
poetry update requests
